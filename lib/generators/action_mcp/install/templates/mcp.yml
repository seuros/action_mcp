# ActionMCP Configuration
# This file contains configuration for the ActionMCP server including
# authentication, profiles, and pub/sub system settings.

shared:
  # Authentication configuration - array of methods to try in order
  authentication: ["none"]  # No authentication required by default

  # Session store configuration
  # Global session store type used by both client and server (default: volatile in dev/test, active_record in production)
  # session_store_type: volatile

  # Client-specific session store type (falls back to session_store_type if not specified)
  # client_session_store_type: volatile

  # Server-specific session store type (falls back to session_store_type if not specified)
  # server_session_store_type: active_record

  # Server instructions - helps LLMs understand the server's purpose
  # Describe what the server is for, not technical details (tools are self-documented)
  # server_instructions:
  #   - "Use this server to manage project tickets and workflows"
  #   - "Helpful for tracking bugs, features, and sprint planning"

  # MCP capability profiles
  profiles:
    primary:
      tools:
        - all
      prompts:
        - all
      resources:
        - all
      options:
        list_changed: false
        logging_enabled: true
        resources_subscribe: false

    minimal:
      tools: []
      prompts: []
      resources: []
      options:
        list_changed: false
        logging_enabled: false
        logging_level: warn
        resources_subscribe: false

# Development environment
development:
  # Use simple pub/sub adapter for development
  adapter: simple

  # Development-specific purpose description
  # server_instructions:
  #   - "Development server for testing your MCP integration"
  #   - "Use for prototyping and experimenting with tools"

  # Session store examples for development
  # Use volatile client sessions for faster development
  # client_session_store_type: volatile
  # Use persistent server sessions to maintain state across restarts
  # server_session_store_type: active_record

  # Thread pool configuration (optional)
  # min_threads: 5     # Minimum number of threads in the pool
  # max_threads: 10    # Maximum number of threads in the pool
  # max_queue: 100     # Maximum number of tasks that can be queued

# Test environment
test:
  # No authentication for testing environment
  authentication: ["none"]

  # Test adapter for testing
  adapter: test

  # Use volatile sessions for testing (fast cleanup)
  # session_store_type: volatile

# Production environment
production:
  # Configure authentication methods for production (customize as needed)
  authentication: ["none"]

  # Additional production profiles for external clients
  profiles:
    external_clients:
      tools: ["WeatherForecastTool"]  # Limited tool access for external clients
      prompts: []
      resources: []

  # Production session store configuration
  # Use persistent storage for production reliability
  # session_store_type: active_record
  # Or configure separately:
  # client_session_store_type: active_record  # Client connections persist across restarts
  # server_session_store_type: active_record  # Server state persists across deployments

  # Choose one of the following adapters:

  # 1. Database-backed adapter (recommended)
  adapter: solid_mcp
  polling_interval: 0.5.seconds
  batch_size: 200      # Number of messages to write in a single batch
  flush_interval: 0.05 # Seconds between batch flushes

  # Thread pool configuration (optional)
  min_threads: 10     # Minimum number of threads in the pool
  max_threads: 20     # Maximum number of threads in the pool
  max_queue: 500      # Maximum number of tasks that can be queued

  # 2. Redis-backed adapter (alternative)
  # adapter: redis
  # url: redis://localhost:6379/1
  # channel_prefix: my_mcp_app_production
  # min_threads: 10    # Minimum number of threads in the pool
  # max_threads: 20    # Maximum number of threads in the pool
  # max_queue: 500     # Maximum number of tasks that can be queued
