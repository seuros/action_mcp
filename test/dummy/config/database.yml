default: &default
  pool: <%= ENV.fetch("RAILS_MAX_THREADS") { 5 } %>

sqlite_defaults: &sqlite_defaults
  <<: *default
  adapter: sqlite3
  timeout: 1000
  pragmas:
    journal_mode: wal
    synchronous: normal

development:
  primary:
    <<: *sqlite_defaults
    database: db/development.sqlite3
<% if ENV["DATABASE_URL"] %>
    url: <%= ENV["DATABASE_URL"] %>
<% end %>

test:
  primary:
    <<: *sqlite_defaults
    database: db/test.sqlite3
<% if ENV["DATABASE_URL"] %>
    url: <%= ENV["DATABASE_URL"] %>
<% end %>
